<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>Web Works CMS</title>
	
	    <link href="{{ @SETTINGS.cdn.cms }}/admin/css/bootstrap.min.css" rel="stylesheet">
	    <link href="{{ @SETTINGS.cdn.cms }}/admin/css/main.css" rel="stylesheet">

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>
	<body>
		<h1><img src="{{ @SETTINGS.cdn.cms }}/admin/imgs/logo.png" alt="Web Works CMS Login"></h1>

		<div class="nav top_nav">
			<include href="/admin/navigation.html" />
		</div>
	
		<div class="container">
			<include href="admin/toolbar.html">
	
			<div class="col-md-6 col-md-offset-3 col-xs-12">
				<div class="box">
					<h2>Setup {{@namespace}}</h2>

					<form method="POST" action="{{@BASE}}/admin/{{@namespace}}/setup">
						<div class="form-group <check if="{{!@contact.routes}}">has-error</check>">
							<label>URL routes to load on</label>
							<input name="routes" value="{{@contact.routes}}" type="text" class="form-control" placeholder="eg: /example">
							<p class="help-block">Seperate by comma, terminator, or pipe to add multiple routes. Use * as wildcard</p>
						</div>
					

						<div class="form-group <check if="{{!@contact.smtp_server || !@contact.smtp_server_check}}">has-error</check>">
							<label>Outgoing mail Server (smtp)</label>
							<input value="{{@contact.smtp_server}}" name="smtp_server" type="text" class="form-control" placeholder="eg: 127.0.0.1">
							<check if="{{!@@contact.smtp_server_check}}">
								<p class="help-block">Failed to connect to outgoing smtp server</p>
							</check>
						</div>

						<div class="form-group <check if="{{!@contact.port || !@contact.smtp_server_check}}">has-error</check>">
							<label>SMTP Port</label>
							<input value="{{@contact.port}}" name="port" type="text" class="form-control" placeholder="eg: 25">
						</div>

						<div class="form-group">
							<label>Redirect to success page</label>
							<input value="{{@contact.success}}" name="contact_success" type="text" class="form-control" placeholder="eg: /contact_success">
							<p class="help-block">Leave blank to return back to same page.</p>
						</div>
						
						<exclude>
						<div class="form-group">
							<label>Form field editting</label>
							  <div class="checkbox">
							    <label>
									<check if="{{@contact.form_field_editting}}">
							    		<true><input checked type="checkbox"> Turned on</true>
							    		<false><input type="checkbox"> Turned off</false>
							    	</check>
							    </label>
							  </div>
							  <p class="help-block">Helpful if you hard code the contact form on the website.</p>
						</div>
						</exclude>

						<button class="button-fullwidth" type="submit">Save setup</button>
					</form>
				</div>
			</div>
		</div>

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="{{ @SETTINGS.cdn.cms }}/admin/js/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.5/ace.js" type="text/javascript" charset="utf-8"></script>
		
		<script>
			var editor = ace.edit("editor");
			var textarea = $('textarea[name="template_code"]');
			editor.setValue(textarea.val(), -1);

			editor.getSession().on("change", function () {
			    textarea.val(editor.getSession().getValue());
			});

			editor.getSession().setMode("ace/mode/html");
			editor.setTheme("ace/theme/chrome");
			editor.setOptions({
			    showGutter: true,
			    vScrollBarAlwaysVisible: false,
			    printMargin: false,
			    fontSize: 14,
			    minLines: 12,
			    maxLines: 1000
			});
			editor.container.style.lineHeight = 1.4;
			editor.renderer.updateFontSize()
		</script>

	</body>
</html>