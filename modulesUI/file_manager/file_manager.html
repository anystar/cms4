<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>Web Works CMS</title>
	
	    <link href="{{ @BASE }}/admin/bootstrap.min.css" rel="stylesheet">
	    <link href="{{ @BASE }}/admin/theme" rel="stylesheet">
		<link href="{{ @BASE }}/admin/file_manager/style.css" rel="stylesheet"/>
		<link href="{{ @BASE }}/admin/gallery/css/dropzone.css" rel="stylesheet">
	
		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
		<style>
			.container {
				background-color: #23232e;
			}

			.filemanager {
				margin-top: 20px;
				z-index: 1000;
			}
			
			.filemanager .search {
				padding-right: 20px;
			}

			.filemanager .search::before {
				right: 10px;
				height: 15px;
				width: 14px;
			}

			.details button {
				color: #000;
				margin-left: 10px;
			}

			.dropzone {
				background-color: transparent;
				margin: 30px;
				border: 2px dashed #3E3E42;
				color: #fff;
			}

			.dropzone .dz-message {
				font-weight: bold;
				font-size: 20px;
			}
		</style>
	</head>
	<body>
		<h1><img src="{{@BASE}}/admin/imgs/logo.png" alt="Web Works CMS Login"></h1>

		<div class="nav top_nav">
			<include href="/admin/navigation.html" with="{{nav_active_file_manager=active}}" />
		</div>

		<div class="container">
			<div class="filemanager">

				<div class="search">
					<input type="search" placeholder="Find a file.." />
				</div>

				<div class="breadcrumbs"></div>

				<ul class="data"></ul>

				<div class="nothingfound">
					<div class="nofiles"></div>
					<span>No files here.</span>
				</div>

				<form method="post" action="{{@BASE}}/admin/file_manager/dropzone" class="dropzone" id="filemanagerdz">
				  <div class="dz-message">
					<div>Drop or click to upload files.</div>
					<div>Max file size: {{@max_upload_size}}</div>
				  </div>
				  <input id="location" type="hidden" name="location" value="uploads" />
				</form>

			</div>
		</div>

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
	    <script src="{{@BASE}}/admin/bootstrap.min.js"></script>
		<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
		<script src="{{ @BASE }}/admin/gallery/js/dropzone.js"></script>
		<script src="{{@BASE}}/admin/file_manager/script.js"></script>
		<script>
		    //Helper function to get parameters from the query string.
		    function getUrlParam( paramName ) {
		        var reParam = new RegExp( '(?:[\?&]|&)' + paramName + '=([^&]+)', 'i' );
		        var match = window.location.search.match( reParam );

		        return ( match && match.length > 1 ) ? match[1] : null;
		    }

			Dropzone.autoDiscover = false;
			Dropzone.options.filemanagerdz = {
				init: function() {
					this.on("queuecomplete", function(file) { location.reload();  });
				}
			};

			new Dropzone("#filemanagerdz");
		</script>
	</body>
</html>