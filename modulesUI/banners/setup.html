<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>Web Works CMS</title>
	
	    <link href="{{ @BASE }}/admin/bootstrap.min.css" rel="stylesheet">
	    <link href="{{ @BASE }}/admin/theme" rel="stylesheet">

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>
	<body>
		<h1><img src="{{@BASE}}/admin/imgs/logo.png" alt="Web Works CMS Login"></h1>

		<div class="nav top_nav">
			<include href="/admin/navigation.html" />
		</div>
	
		<div class="container">
			<div class="col-md-6 col-md-offset-3 col-xs-12">
				<div class="box">
					<h2>Setup {{@namespace}}</h2>

					<form method="POST" action="{{@BASE}}/admin/{{@namespace}}/setup">
						<div class="form-group <check if='{{!@banner.routes}}'>has-error</check>">
							<label>URL routes to load on</label>
							<input name="routes" value="{{@banner.routes}}" type="text" class="form-control" placeholder="eg: /example">
							<p class="help-block">Seperate by comma, terminator, or pipe to add multiple routes. Use * as wildcard</p>
						</div>

						<div class="form-group <check if='{{!@banner.directory}}'>has-error</check>">
							<label>Image directory</label>
							
							<check if="{{@banner.directory}}">
								<true><input name="directory" value="{{@banner.directory}}" type="text" class="form-control" placeholder="relative path"></true>
								<false><input name="directory" type="text" class="form-control" placeholder="assets/{{@namespace}}/"></false>
							</check>
							<p class="help-block">Location of the images in the website directory</p>
						</div>

						<div class="form-group">
							<label>Banner dimensions (for upload resizing)</label>
							
							<input value="{{@banner.dimensions}}" name="dimensions" type="text" class="form-control" placeholder="1000x400">
							<p class="help-block">ignores aspect ratio. (shrinks and then crops from center)</p>
						</div>

						<div class="form-group">
							<label>Autoload slider</label>
							<select class="form-control">
								<option class="form-control">Select slider to autoload</option>
								<option class="form-control">Flexslider</option>
								<option class="form-control">SlidesJS</option>
							</select>
						</div>

						<div class="form-group">
							<label>Javascript framework</label>
							<input value="{{@banner.javascript_framework_url}}" name="javascript_framework_url" type="text" class="form-control" placeholder="eg: url to jquery">
						</div>

						<div class="form-group">
							<label>Javascript asset</label>
							<input value="{{@banner.javascript_url}}" name="javascript_url" type="text" class="form-control" placeholder="url to javascript assets">
						</div>

						<div class="form-group">
							<label>Stylesheet asset</label>
							<input value="{{@banner.stylesheet_url}}" name="stylesheet_url" type="text" class="form-control" placeholder="url to stylesheet assets">
						</div>

						<div class="form-group">
							<label>Javascript initialization</label>
							<div id="editor"></div>
							<textarea style="display:none;" name="javascript_init" class="form-control" rows="3">{{@banner.javascript_init}}</textarea>
						</div>

						<div class="form-group">
							<label>Template code</label>
							<div id="editor2"></div>
							<textarea style="display:none;" name="template_code" class="form-control" rows="3">{{@banner.template_code}}</textarea>
						</div>

						<button class="button-fullwidth" type="submit">Save setup</button>
					</form>
				</div>
			</div>
		</div>

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.5/ace.js" type="text/javascript" charset="utf-8"></script>
		<script>
			var editor = ace.edit("editor");
			var textarea = $('textarea[name="javascript_init"]');
			editor.setValue(textarea.val(), -1);

			editor.getSession().on("change", function () {
			    textarea.val(editor.getSession().getValue());
			});

			editor.getSession().setMode("ace/mode/javascript");
			editor.setTheme("ace/theme/chrome");
			editor.setOptions({
			    showGutter: true,
			    vScrollBarAlwaysVisible: false,
			    printMargin: false,
			    fontSize: 14,
			    minLines: 12,
			    maxLines: 1000
			});
			editor.container.style.lineHeight = 1.4;
			editor.renderer.updateFontSize()

			var editor2 = ace.edit("editor2");
			var textarea2 = $('textarea[name="template_code"]');
			editor2.setValue(textarea2.val(), -1);
			editor2.getSession().on("change", function () {
			    textarea2.val(editor2.getSession().getValue());
			});

			editor2.getSession().setMode("ace/mode/html");
			editor2.setTheme("ace/theme/chrome");
			editor2.setOptions({
			    showGutter: true,
			    vScrollBarAlwaysVisible: false,
			    printMargin: false,
			    fontSize: 14,
			    minLines: 12,
			    maxLines: 1000
			});

			editor2.container.style.lineHeight = 1.4;
			editor2.renderer.updateFontSize()
		</script>

		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="{{@BASE}}/admin/bootstrap.min.js"></script>
	</body>
</html>