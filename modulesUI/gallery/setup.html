<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>Web Works CMS</title>
	
	    <link href="{{ @SETTINGS.cdn.cms }}/admin/css/bootstrap.min.css" rel="stylesheet">
	    <link href="{{ @SETTINGS.cdn.cms }}/admin/css/main.css" rel="stylesheet">

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>
	<body>
		<h1><img src="{{ @SETTINGS.cdn.cms }}/admin/imgs/logo.png" alt="Web Works CMS Login"></h1>

		<div class="nav top_nav">
			<include href="/admin/navigation.html" />
		</div>
	
		<div class="container">
			<include href="admin/toolbar.html" with="module_name='Gallery'">

			<div class="col-md-6 col-md-offset-3 col-xs-12">
				<div class="box">
					<h2>Setup {{@namespace}}</h2>

					<form method="POST" action="{{@BASE}}/admin/{{@namespace}}/setup">
						<div class="form-group <check if='{{!@gallery.routes}}'>has-error</check>">
							<label>URL routes to load on</label>
							<input name="routes" value="{{@gallery.routes}}" type="text" class="form-control" placeholder="eg: /example">
							<p class="help-block">Seperate by comma, terminator, or pipe to add multiple routes. Use * as wildcard</p>
						</div>

						<div class="form-group <check if='{{!@gallery.image_directory}}'>has-error</check>">
							<label>Image directory</label>
							<input name="image_directory" value="{{@gallery.image_directory}}" type="text" class="form-control" placeholder="eg: /assets/{{@namespace}}/">
						</div>

						<div class="form-group <check if='{{!@gallery.thumb_directory}}'>has-error</check>">
							<label>Thumb directory</label>
							<input name="thumb_directory" value="{{@gallery.thumb_directory}}" type="text" class="form-control" placeholder="eg: /assets/{{@namespace}}/thumbs">
						</div>

						<div class="form-group">
							<label>Captions Enabled: </label> <input style="width: 30px;background-color:#ccc;" type="checkbox" name="captions_enabled" <check if="{{@gallery.captions_enabled}}">checked</check>>
						</div>

						<div class="form-group">
							<label>Tags Enabled: </label> <input style="width: 30px;background-color:#ccc;" type="checkbox" name="tags_enabled" <check if="{{@gallery.tags_enabled}}">checked</check>>
						</div>
					
						<h3>Upload settings</h3>
						<ul>
							<li>resize images when uploaded</li>
							<li>respect aspect ratio. <br>(fit image with its longest side into the resize dimensions)</li>
							<li>leave blank to not resize.</li>
						</ul>
						
						<div class="form-group">
							<label>Thumb size</label>
							<input name="thumb_size" value="{{@gallery.thumb_size}}" type="text" class="form-control" placeholder="500x500">
							<p class="help-block">Leave blank not to resize</p>
						</div>

						<div class="form-group">
							<label>Image size</label>
							<input name="image_size" value="{{@gallery.image_size}}" type="text" class="form-control" placeholder="2000x2000">
							<p class="help-block">Leave blank not to resize</p>
						</div>

						<button class="button-fullwidth" type="submit">Save setup</button>
					</form>
				</div>
			</div>
		</div>
		
		<include href="admin/_needhelp.html">

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="{{ @SETTINGS.cdn.cms }}/admin/js/jquery.min.js"></script>

		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="{{ @SETTINGS.cdn.cms }}/admin/js/bootstrap.min.js"></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.5/ace.js" type="text/javascript" charset="utf-8"></script>
		
		<script>
			var editor = ace.edit("editor");
			var textarea = $('textarea[name="template_code"]');
			editor.setValue(textarea.val(), -1);

			editor.getSession().on("change", function () {
			    textarea.val(editor.getSession().getValue());
			});

			editor.getSession().setMode("ace/mode/html");
			editor.setTheme("ace/theme/chrome");
			editor.setOptions({
			    showGutter: true,
			    vScrollBarAlwaysVisible: false,
			    printMargin: false,
			    fontSize: 14,
			    minLines: 12,
			    maxLines: 1000
			});
			editor.container.style.lineHeight = 1.4;
			editor.renderer.updateFontSize();
		</script>
	</body>
</html>